CREATE TABLE `GYARTAS_HELYE` ( 
	`GYAR_KOD` VARCHAR(6) NOT NULL ,
	`ORSZAG` VARCHAR(50) NOT NULL ,
	`VAROS` VARCHAR(50) NOT NULL ,
	PRIMARY KEY (`GYAR_KOD`)
) ENGINE = InnoDB;

CREATE TABLE KESZLET ( 
	KESZLET_ID INT NOT NULL, 
	KESZLET_NEVE VARCHAR(30) NOT NULL, 
	BESOROLAS INT NOT NULL, 
	KATEGORIA VARCHAR(30) NOT NULL, 
	AR INT NOT NULL, 
	DARABSZAM INT CHECK (DARABSZAM>0), 
	GYAR_KOD VARCHAR(6) NOT NULL, 
	PRIMARY KEY (KESZLET_ID), 
	FOREIGN KEY (GYAR_KOD) REFERENCES gyartas_helye(GYAR_KOD)
) ENGINE = INNODB;

CREATE TABLE LEGO_DARABOK (
	ID INT NOT NULL,
    LEIRAS VARCHAR(50) DEFAULT "NINCSEN LEÍRÁS",
    SZIN_ID INT NOT NULL,
    CATEGORY VARCHAR(20) NOT NULL,
    PRIMARY KEY (ID)
) ENGINE = INNODB;

CREATE TABLE K_LD (
    KESZLET_ID INT NOT NULL,
    ID INT NOT NULL,
    MENNYISEG INT NOT NULL,
    FOREIGN KEY (KESZLET_ID) REFERENCES keszlet(KESZLET_ID),
    FOREIGN KEY (ID) REFERENCES lego_darabok(ID)
) ENGINE = INNODB;

CREATE TABLE ARUSITO_BOLTOK (
	BOLT_AZONOSITO INT NOT NULL,
    ORSZAG VARCHAR(30) NOT NULL,
    ORSZAG_ROVID VARCHAR(3) NOT NULL,
    VAROS VARCHAR(30) NOT NULL,
    UTCA VARCHAR(30) NOT NULL,
    HAZSZAM INT NOT NULL,
    BESOROLAS INT DEFAULT 0,
    PRIMARY KEY (BOLT_AZONOSITO)
) ENGINE = INNODB;

CREATE TABLE K_B (
	BOLT_AZONOSITO INT NOT NULL,
    KESZLET_ID INT NOT NULL,
    RAKTARON INT DEFAULT 0,
    FOREIGN KEY (BOLT_AZONOSITO) REFERENCES arusito_boltok(BOLT_AZONOSITO),
    FOREIGN KEY (KESZLET_ID) REFERENCES keszlet(KESZLET_ID)
) ENGINE = INNODB;

CREATE TABLE VASARLAS (
	VASARLAS_ID INT NOT NULL,
    VASARLO_NEVE VARCHAR(50) NOT NULL,
    AR INT DEFAULT 0,
    VIP BOOLEAN NOT NULL,
    EXTRA_VIP_PONT INT NOT NULL,
    PRIMARY KEY (VASARLAS_ID)
) ENGINE = INNODB;


CREATE TABLE B_V (
	BOLT_AZONOSITO INT NOT NULL,
    VASARLAS_ID INT NOT NULL,
    DATUM DATE NOT NULL,
    FOREIGN KEY (BOLT_AZONOSITO) REFERENCES arusito_boltok(BOLT_AZONOSITO),
    FOREIGN KEY (VASARLAS_ID) REFERENCES vasarlas(VASARLAS_ID)
) ENGINE = INNODB;

CREATE TABLE VASARLAS_KESZLETEK (
    ID INT NOT NULL AUTO_INCREMENT,
    KESZLET_ID INT NOT NULL,
    VASARLAS_ID INT NOT NULL,
    DARAB INT NOT NULL,
    AR INT NOT NULL,
    PRIMARY KEY (ID),
    FOREIGN KEY (VASARLAS_ID) REFERENCES vasarlas(VASARLAS_ID)
)ENGINE = INNODB;